{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app/src/MVP modules/Observer.ts","webpack:///./app/src/functions/common/getCoords.ts","webpack:///external \"jQuery\"","webpack:///./app/src/MVP modules/Slider/SliderModel.ts","webpack:///./app/src/functions/common/arrayEquals.ts","webpack:///./app/src/MVP modules/Slider/SliderView.ts","webpack:///./app/src/functions/common/countShift.ts","webpack:///./app/src/MVP modules/Slider/SliderPresenter.ts","webpack:///./app/src/MVP modules/SliderPluginsFactory.ts","webpack:///./app/src/MVP modules/SliderLabelsView.ts","webpack:///./app/src/MVP modules/SliderTooltipView.ts","webpack:///./app/src/styles/jquery-slider.styles.ts","webpack:///./app/src/jquery-slider.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","default","[object Object]","this","observers","observer","Error","length","toString","push","splice","data","observersSnapshot","slice","domElem","box","getBoundingClientRect","top","pageYOffset","bottom","left","pageXOffset","right","width","height","jQuery","arrayEquals_1","__importDefault","Observer_1","SliderModel","_incorrectOptionsReceivedSubject","_optionsSetSubject","_valueUpdatedSubject","_options","_classes","slider","main","orientation","complete","horizontal","vertical","range","firstHandle","callback","addObserver","error","optionsErrors","_optionsErrors","classes","undefined","jquery-slider jquery-slider-horizontal","jquery-slider-range","jquery-slider-handle","jquery-slider jquery-slider-vertical","min","max","step","tooltip","animate","pips","labels","change","valueData","valueNumber","Array","isArray","comparingValueIndex","notifyObservers","_throw","notSet","option","className","errors","options","notExisting","userClasses","includes","contains","restOptions","optionsObject","_extendBySingleOption","result","_deleteWSFromUserCLasses","_extendByOptionsObject","incorrectOptions","alreadySet","getDefaultOptions","currentOptions","$","extend","_changeOrientationClass","defaultOptions","extendedOptions","_checkOptions","optionsCopy","incorrectType","minAndMax","lessOrMore","optionObj","twoExtra","classNames","customIsNotString","defaults","optionsKeys","keys","defaultOptionsKeys","incorrectOptionsObject","mainClass","trim","extraWs","classesKeys","defaultClassesKeys","type","params","param","checkType","incorrect","rangeNotTrue","rangeTrue","beyond","incorrectFunction","func","values","replace","incorrectArray","arrayEquals","firstArray","secondArray","countShift_1","getCoords_1","_html","_root","_classesHash","_handlesPositionInPixels","_data","rendered","_eventListeners","handleMoving","handleMouseDown","mouseDownEvent","freeSpaceCoords","targetHandle","target","_getCoords","wrapper","firstHandleCoords","secondHandleCoords","secondHandle","handleNumber","handleShift","_countHandleShift","mouseMoveHandler","mouseMoveEvent","shiftX","x","newLeft","pageX","rightEdge","currentHandleXInPixels","refreshValue","shiftY","y","newTop","pageY","currentHandleYInPixels","document","addEventListener","mouseUpHandler","removeEventListener","handleOnDragStart","sliderClick","clickEvent","coordinateToMove","_getClosestHandleNumber","_valueChangedSubject","html","root","append","_setHandlePositionInPixels","_renderOptions","remove","wasRendered","rootSnapshot","cleanDom","_setSliderElements","_setHandleMovingHandler","_setSliderClickHandler","_setSliderClasses","_setTransition","render","_renderHandlePositions","_renderRange","addHandleMovingHandler","handle","ondragstart","renderHandlePosition","handleCoords","handlePositionInPixels","style","positions","wrapperCoords","defaultClasses","setAttribute","position","addClass","handleProp","transitionMs","transition","addTransitionToHandle","addHandlePosition","handleValueInPercents","currentHandleCoordinate","isHorizontal","wrapperStart","currentHandlePosition","valuesArray","currentValue","getValuesArray","approximateValue","createElement","countShift","hash","coordinate","firstRight","secondLeft","firstTop","secondBottom","plugin","pluginView","number","destroy","event","elem","elemCoords","SliderModel_1","SliderPluginsFactory_1","_view","_model","setUp","_pluginsFactory","_plugins","tooltipView","first","createView","second","labelsView","whenOptionsSet","setOptionsToViewCallback","whenOptionsAreIncorrect","showErrorMessageCallback","whenValueChanged","validateValueCallback","whenValueUpdated","renderHandlePositionCallback","whenUserClicksOnLabel","middleCoordinate","view","model","userOptions","setOptions","getOptions","firstTooltipView","secondTooltipView","state","isSet","renderPlugin","_toggleTooltip","_toggleLabels","isRendered","destroyPlugin","labelsOptions","valueFunc","updateHandlePosition","setText","SliderLabelsView_1","SliderTooltipView_1","_labelClickedSubject","_labels","_createLabels","_setClasses","_setText","_setClickHandler","scaleProperty","labelProperty","sliderPropertyValue","scale","interval","_getInterval","currentSize","label","labelPropertyValue","pip","children","pipPropertyValue","removeChild","_middleCoordinate","_getLabel","classList","add","innerHTML","String","scaleSize","labelCoords","middle","_text","_orientation","_create","text","setOrientation","_setOrientationClass","cleanTextField","SliderView_1","SliderPresenter_1","sliderMethods","getData","element","existsOrNot","$this","eq","initialize","setData","throwErr","fn","method","apply","init"],"mappings":"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","file":"./js/jquery-slider.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","interface ObserversStorage {\r\n    addObserver(observer: Function): void;\r\n    removeObserver(observer: Function): void;\r\n    notifyObservers(data: any): void;\r\n}\r\n\r\nclass Observer implements ObserversStorage{\r\n    observers: Function[];\r\n\r\n    constructor() {\r\n        this.observers = [];\r\n    }\r\n\r\n    addObserver(observer: Function): void {\r\n        if(typeof observer !== \"function\") {\r\n            throw new Error(\"Observer must be a function\");\r\n        }\r\n\r\n        for (let i = 0; i < this.observers.length; i++) {\r\n            if (this.observers[i].toString() === observer.toString()) {\r\n                throw new Error(\"Observer already in the list\");\r\n            }\r\n        }\r\n\r\n        this.observers.push(observer);\r\n    }\r\n\r\n    removeObserver(observer: Function): void {\r\n        for (let i = 0; i < this.observers.length; i++) {\r\n            if (this.observers[i].toString() === observer.toString()) {\r\n                this.observers.splice(i, 1);\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n        throw new Error(\"Could not find observer in list of observers\");\r\n    }\r\n\r\n    notifyObservers(data?: any): void {\r\n        // Make a copy of observer list in case the list\r\n        // is mutated during the notifications.\r\n        const observersSnapshot = this.observers.slice(0);\r\n\r\n        for (let i = 0; i < observersSnapshot.length; i++) {\r\n            observersSnapshot[i](data);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Observer;\r\n\r\n","export interface Coords {\r\n    top: number;\r\n    bottom: number;\r\n    left: number;\r\n    right: number;\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nconst getCoords = (domElem: HTMLElement): Coords => {\r\n  const box = domElem.getBoundingClientRect();\r\n\r\n  return {\r\n      top: box.top + pageYOffset,\r\n      bottom: box.bottom + pageYOffset,\r\n      left: box.left + pageXOffset,\r\n      right: box.right + pageXOffset,\r\n      width: box.width,\r\n      height: box.height\r\n    };\r\n};\r\n\r\nexport default getCoords;\r\n","module.exports = jQuery;","import arrayEquals from \"../../functions/common/arrayEquals\";\r\nimport Observer from \"../Observer\";\r\n\r\nexport type HorizontalClasses = {\r\n    \"jquery-slider jquery-slider-horizontal\": string;\r\n    \"jquery-slider-range\": string;\r\n    \"jquery-slider-handle\": string;\r\n}\r\n\r\nexport type VerticalClasses = {\r\n    \"jquery-slider jquery-slider-vertical\": string;\r\n    \"jquery-slider-range\": string;\r\n    \"jquery-slider-handle\": string;\r\n}\r\n\r\nexport type ValueFunction = (value?: Options[\"value\"]) => string | number;\r\n\r\nexport type ChangeFunction = ((value: number | number[]) => void);\r\n\r\nexport type Options = {\r\n    min: number;\r\n    max: number;\r\n    step: number;\r\n    value: number | number[];\r\n    orientation: \"horizontal\" | \"vertical\";\r\n    range: \"min\" | \"max\" | boolean;\r\n    tooltip: boolean | ValueFunction;\r\n    animate: \"slow\" | \"fast\" | false | number;\r\n    labels: true | false | ValueFunction;\r\n    pips: boolean;\r\n    change: ChangeFunction | false;\r\n\r\n    classes: HorizontalClasses | VerticalClasses;\r\n};\r\n\r\nexport type UserOptions = {\r\n    min?: number;\r\n    max?: number;\r\n    step?: number;\r\n    value?: number | number[];\r\n    orientation?: \"horizontal\" | \"vertical\";\r\n    range?: \"min\" | \"max\" | boolean;\r\n    tooltip?: boolean | ValueFunction;\r\n    animate?: \"slow\" | \"fast\" | false | number;\r\n    labels?: true | false | ValueFunction;\r\n    pips?: boolean;\r\n    change?: ChangeFunction | false;\r\n\r\n    classes?: {\r\n        \"jquery-slider\"?: string;\r\n        \"jquery-slider-range\"?: string;\r\n        \"jquery-slider-handle\"?: string;\r\n    };\r\n};\r\n\r\nexport type RestOptionsToSet = (UserOptions[keyof UserOptions] | UserOptions[\"classes\"][keyof UserOptions[\"classes\"]]);\r\n\r\nclass SliderModel {\r\n    private _incorrectOptionsReceivedSubject = new Observer();\r\n    private _optionsSetSubject = new Observer();\r\n    private _valueUpdatedSubject = new Observer();\r\n\r\n    private _options: Options | null = null;\r\n\r\n    private _classes = {\r\n        slider: {\r\n            main: \"jquery-slider\" as keyof UserOptions[\"classes\"],\r\n            orientation: (orientation: \"horizontal\" | \"vertical\"): keyof Options[\"classes\"] => {\r\n                return `jquery-slider-${orientation}` as keyof Options[\"classes\"];\r\n            },\r\n            complete: (orientation: \"horizontal\" | \"vertical\"): keyof Options[\"classes\"] => {\r\n                return `jquery-slider jquery-slider-${orientation}` as keyof Options[\"classes\"];\r\n            },\r\n            horizontal: \"jquery-slider-horizontal\" as keyof Options[\"classes\"],\r\n            vertical: \"jquery-slider-vertical\" as keyof Options[\"classes\"]\r\n        },\r\n        range: \"jquery-slider-range\" as keyof Options[\"classes\"],\r\n        firstHandle: \"jquery-slider-handle\" as keyof Options[\"classes\"]\r\n    };\r\n\r\n    private static _optionsErrors = {\r\n        notSet: \"Options are not set (to set options pass options object)\",\r\n        alreadySet: \"Options are already set (to change - provide options)\",\r\n        incorrectOptions: \"Incorrect options (should be object or key - value pairs)\",\r\n        incorrectOptionsObject: \"Options are incorrect (should correspond the required format)\",\r\n        options: {\r\n            notExisting: (option: string): string => `Option \"${option}\" doesn't exist`,\r\n            incorrectType: (option: string, type: string): string => {\r\n                return `Options are incorrect (option '${option}' should be of type '${type}')`\r\n            },\r\n        },\r\n        classes: {\r\n            notExisting: (className: string): string => `Class \"${className}\" does not exist`,\r\n            contains: \"Only option 'classes' contains classes\",\r\n            twoExtra: \"Only option 'classes' can have two extra arguments\",\r\n            customIsNotString: \"Class is incorrect (should be a string)\",\r\n            extraWs: \"Options are incorrect (main classes shouldn't have extra whitespaces)\",\r\n            incorrectType: \"Options are incorrect (classes should correspond the required format)\"\r\n        },\r\n        value: {\r\n            beyond: \"Options are incorrect ('value' cannot go beyond 'min' and 'max')\",\r\n            incorrectType: \"Options are incorrect ('value' can only be of type 'number' or 'array')\",\r\n            incorrectArray: \"Options are incorrect ('value' array should contain two numbers)\",\r\n            rangeNotTrue: \"Options are incorrect (array is allowed for 'value' when 'range' is true)\",\r\n            rangeTrue: \"Options are incorrect ('value' should be array when 'range' is true)\"\r\n        },\r\n        minAndMax: {\r\n            lessOrMore: (option: string, lessOrMore: \"less\" | \"more\"): string => {\r\n                return `Options are incorrect (option '${option}' cannot be ${lessOrMore} than 'value')`;\r\n            }\r\n        },\r\n        orientation: {\r\n            incorrect: \"Options are incorrect (for orientation only 'vertical' and 'horizontal' values are allowed)\"\r\n        },\r\n        range: {\r\n            incorrect: \"Options are incorrect (option 'range' can only be 'min', 'max' or typeof 'boolean')\"\r\n        },\r\n        step: {\r\n            incorrect: \"Options are incorrect (option 'step' value should be between 'min' and 'max')\"\r\n        },\r\n        tooltip: {\r\n            incorrect: \"Options are incorrect (option 'tooltip' should be boolean true or false, or function)\",\r\n            incorrectFunction: \"Options are incorrect ('tooltip's function should return string or number)\"\r\n        },\r\n        animate: {\r\n            incorrect: \"Options are incorrect (option 'animate' should be 'false', 'slow', 'fast' or number)\"\r\n        },\r\n        labels: {\r\n            incorrect: \"Options are incorrect (option 'labels' can only be true false, \" +\r\n                \"or function returning string or number)\",\r\n            incorrectFunction: \"Options are incorrect ('labels' function should return string or number)\"\r\n        },\r\n        pips: {\r\n            incorrect: \"Options are incorrect (option 'pips' should be true or false)\"\r\n        },\r\n        change: {\r\n            incorrect: \"Options are incorrect (option 'change' can be only function or false)\",\r\n            incorrectFunction: \"Options are incorrect ('change' function has \" +\r\n                \"two arguments and return undefined)\"\r\n        }\r\n    };\r\n\r\n    whenOptionsAreIncorrect(callback: (error: string) => void): void {\r\n        this._incorrectOptionsReceivedSubject.addObserver((error: string) => {\r\n            callback(error);\r\n        });\r\n    }\r\n\r\n    whenOptionsSet(callback: () => void): void {\r\n        this._optionsSetSubject.addObserver(() => {\r\n            callback();\r\n        });\r\n    }\r\n\r\n    whenValueUpdated(callback: () => void): void {\r\n       this._valueUpdatedSubject.addObserver(() => {\r\n           callback();\r\n       }) ;\r\n    }\r\n\r\n    static get optionsErrors() {\r\n        return SliderModel._optionsErrors;\r\n    }\r\n\r\n    static getDefaultOptions(orientation: \"horizontal\" | \"vertical\" | undefined): Options {\r\n        if ( orientation === undefined ) orientation = \"horizontal\";\r\n        let classes: Options[\"classes\"];\r\n\r\n        if ( orientation === \"horizontal\" ) {\r\n            classes = {\r\n                \"jquery-slider jquery-slider-horizontal\": \"\",\r\n                \"jquery-slider-range\": \"\",\r\n                \"jquery-slider-handle\": \"\"\r\n            };\r\n        }\r\n        if ( orientation === \"vertical\" ) {\r\n            classes = {\r\n                \"jquery-slider jquery-slider-vertical\": \"\",\r\n                \"jquery-slider-range\": \"\",\r\n                \"jquery-slider-handle\": \"\"\r\n            };\r\n        }\r\n\r\n        return {\r\n            min: 0,\r\n            max: 100,\r\n            step: 1,\r\n            value: 0,\r\n            orientation: orientation,\r\n            range: false,\r\n            tooltip: false,\r\n            animate: \"fast\",\r\n            pips: false,\r\n            labels: false,\r\n            change: false,\r\n\r\n            classes: classes,\r\n        };\r\n    }\r\n\r\n    refreshValue(valueData: [number, string]): void {\r\n        let value = valueData[0];\r\n        const valueNumber = valueData[1];\r\n\r\n        if ( value < this._options.min ) value = this._options.min;\r\n        if ( value > this._options.max ) value = this._options.max;\r\n\r\n        if ( typeof this._options.value === \"number\" && this._options.range !== true ) {\r\n            this._options.value = value;\r\n        }\r\n\r\n        if ( Array.isArray(this._options.value) && this._options.range === true ) {\r\n            const comparingValueIndex = valueNumber === \"first\" ? 1 : 0;\r\n\r\n            if ( value === this._options.value[comparingValueIndex] ) {\r\n                const multiplier = valueNumber === \"first\" ? -1 : 1;\r\n                value += multiplier * this._options.step;\r\n            }\r\n\r\n            (this._options.value)[valueNumber === \"first\" ? 0 : 1] = value;\r\n        }\r\n\r\n        this._valueUpdatedSubject.notifyObservers();\r\n    }\r\n\r\n    destroy(): void {\r\n        if ( !this._options ) {\r\n            this._throw(SliderModel._optionsErrors.notSet);\r\n        }\r\n\r\n        this._options = null;\r\n    }\r\n\r\n    getOptions(option?: keyof Options, className?: keyof UserOptions[\"classes\"]): Options | Options[keyof Options] |\r\n        Options[\"classes\"][keyof Options[\"classes\"]] {\r\n\r\n        const errors = SliderModel._optionsErrors;\r\n\r\n        if ( !this._options ) {\r\n            this._throw(SliderModel._optionsErrors.notSet);\r\n\r\n            return;\r\n        }\r\n\r\n        if ( !option && !className ) return this._options;\r\n\r\n        if ( option ) {\r\n            if ( !!option && !(option in this._options) ) {\r\n                this._throw(errors.options.notExisting(option));\r\n\r\n                return;\r\n            }\r\n\r\n            const userClasses: (keyof UserOptions[\"classes\"])[] = [\r\n                this._classes.slider.main,\r\n                this._classes.range,\r\n                this._classes.firstHandle\r\n            ];\r\n\r\n            if ( className && !userClasses.includes(className) ) {\r\n                this._throw(errors.classes.notExisting(className));\r\n\r\n                return;\r\n            }\r\n\r\n            if ( option && className && option !== \"classes\") {\r\n                this._throw(errors.classes.contains);\r\n\r\n                return;\r\n            }\r\n\r\n            if (option && !className) {\r\n                return this._options[option];\r\n            } else {\r\n                if ( className === this._classes.slider.main ) {\r\n                    className = this._classes.slider.complete(this._options.orientation);\r\n                }\r\n                return this._options.classes[className as keyof Options[\"classes\"]];\r\n            }\r\n        }\r\n    }\r\n\r\n    setOptions(options?: UserOptions | keyof Options, ...restOptions: RestOptionsToSet[]): void | false {\r\n        const errors = SliderModel._optionsErrors;\r\n\r\n        if ( restOptions.length !== 0 && typeof options === \"string\" ) {\r\n            if ( !this._options ) {\r\n                this._throw(SliderModel._optionsErrors.notSet);\r\n\r\n                return;\r\n            }\r\n\r\n            if ( restOptions.length === 1 || restOptions.length === 2 ) {\r\n                const optionsObject =\r\n                    this._extendBySingleOption(\r\n                        options,\r\n                        ...restOptions as (keyof UserOptions[\"classes\"] | UserOptions[keyof UserOptions])[]\r\n                    );\r\n\r\n                if ( !optionsObject.result ) return false;\r\n\r\n                this._options = optionsObject.options;\r\n\r\n                optionsObject.options = null;\r\n\r\n                this._deleteWSFromUserCLasses();\r\n            }\r\n\r\n        } else if ( typeof options === \"object\" && restOptions.length === 0 ) {\r\n\r\n            const optionsObject = this._extendByOptionsObject(options);\r\n\r\n            if ( !optionsObject.result ) return;\r\n\r\n            this._options = optionsObject.options;\r\n\r\n            this._deleteWSFromUserCLasses();\r\n\r\n        } else if ( !options && restOptions.length === 0 ) {\r\n            if ( this._options ) {\r\n                this._throw(errors.alreadySet);\r\n\r\n                return;\r\n            }\r\n\r\n            this._options = SliderModel.getDefaultOptions(\"horizontal\");\r\n        } else {\r\n\r\n            return this._throw(errors.incorrectOptions);\r\n        }\r\n\r\n        this._optionsSetSubject.notifyObservers();\r\n    }\r\n\r\n    private _extendByOptionsObject(\r\n        options: UserOptions\r\n    ): { result: false } | { options: Options; result: true } {\r\n        let currentOptions: Options;\r\n\r\n        if ( this._options ) {\r\n            currentOptions = $.extend(true, {}, this._options);\r\n\r\n            if ( (options as Options).orientation && (options).orientation !== this._options.orientation ) {\r\n                const optionsObject =\r\n                    this._changeOrientationClass(currentOptions, \"result\", (options).orientation);\r\n\r\n                optionsObject.options = null;\r\n\r\n                if ( !optionsObject.result ) return { result: false };\r\n            }\r\n\r\n            const optionsObject =\r\n                this._changeOrientationClass(options, \"user\",\r\n                    (options).orientation ? (options).orientation :\r\n                        this._options.orientation);\r\n\r\n            optionsObject.options = null;\r\n\r\n            if ( !optionsObject.result ) return { result: false };\r\n\r\n        } else {\r\n            currentOptions = SliderModel.getDefaultOptions((options).orientation);\r\n\r\n            const optionsObject =\r\n                this._changeOrientationClass(options, \"user\", (options).orientation);\r\n\r\n            optionsObject.options = null;\r\n\r\n            if ( !optionsObject.result ) return { result: false };\r\n        }\r\n\r\n        let defaultOptions: Options | null = $.extend(true, {}, currentOptions);\r\n\r\n        const extendedOptions: Options = $.extend(true, defaultOptions, options);\r\n\r\n        defaultOptions = null;\r\n\r\n        if ( !this._checkOptions(extendedOptions) ) {\r\n            return { result: false };\r\n        } else {\r\n            return {\r\n                options: extendedOptions,\r\n                result: true\r\n            };\r\n        }\r\n    }\r\n\r\n    private _extendBySingleOption(\r\n        option: keyof Options,\r\n        ...restOptions: (keyof UserOptions[\"classes\"] | UserOptions[keyof UserOptions])[]\r\n    ): { result: boolean; options?: Options } {\r\n\r\n        const errors = SliderModel.optionsErrors;\r\n\r\n        if ( !(option in this._options) ) {\r\n            this._throw(errors.options.notExisting(option));\r\n\r\n            return { result: false };\r\n        }\r\n\r\n        const optionsCopy = $.extend(true, {}, this._options);\r\n\r\n        if ( restOptions.length === 1 ) {\r\n            if (option === \"classes\" && typeof restOptions[0] === \"object\") {\r\n                const classes = restOptions[0] as UserOptions[\"classes\"];\r\n\r\n                if (this._classes.slider.main in classes) {\r\n                    classes[this._classes.slider.complete(this._options.orientation)] =\r\n                        classes[this._classes.slider.main];\r\n\r\n                    delete classes[this._classes.slider.main];\r\n                }\r\n\r\n                $.extend(optionsCopy.classes, classes);\r\n            } else if ( option === \"orientation\" ) {\r\n                if ( restOptions[0] !== optionsCopy.orientation ) {\r\n                    this._changeOrientationClass(optionsCopy,\r\n                        \"result\",\r\n                        restOptions[0] as Options[\"orientation\"]\r\n                    );\r\n\r\n                    optionsCopy[option] = restOptions[0] as Options[\"orientation\"];\r\n                }\r\n            } else if ( option === \"min\" || option === \"max\" ) {\r\n                if ( typeof restOptions[0] !== \"number\" ) {\r\n                    this._throw(errors.options.incorrectType(option, \"number\"));\r\n\r\n                    return { result: false };\r\n                }\r\n\r\n                if ( typeof this._options.value === \"number\" ) {\r\n                    if ((option === \"min\" && restOptions[0] > this._options.value) ||\r\n                        option === \"max\" && restOptions[0] < this._options.value) {\r\n\r\n                        this._throw(errors.minAndMax.lessOrMore(option,\r\n                            option === \"min\" ? \"more\" : \"less\"));\r\n\r\n                        return { result: false };\r\n                    }\r\n                }\r\n                if ( Array.isArray(this._options.value) ) {\r\n                    if ( (option === \"min\" && (restOptions[0] > this._options.value[0] ||\r\n                    restOptions[0] > this._options.value[1])) ||\r\n                        (option === \"max\" && (restOptions[0] < this._options.value[0] ||\r\n                    restOptions[0] < this._options.value[1])) ) {\r\n\r\n                        this._throw(errors.minAndMax.lessOrMore(option,\r\n                            option === \"min\" ? \"more\" : \"less\"));\r\n\r\n                        return { result: false };\r\n                    }\r\n\r\n                }\r\n\r\n                optionsCopy[option] = restOptions[0] as Options[\"min\" | \"max\"];\r\n            } else {\r\n                const optionObj: any = {};\r\n                optionObj[option] = restOptions[0];\r\n\r\n                $.extend(optionsCopy, optionObj as Options);\r\n            }\r\n\r\n            if ( !this._checkOptions(optionsCopy) ) return { result: false };\r\n\r\n            return {\r\n                result: true,\r\n                options: optionsCopy\r\n            }\r\n        }\r\n\r\n        if ( restOptions.length === 2 ) {\r\n            if ( option !== \"classes\" ) {\r\n                this._throw(errors.classes.twoExtra);\r\n\r\n                return { result: false };\r\n            }\r\n\r\n            const classNames = [\r\n                this._classes.slider.main,\r\n                this._classes.range,\r\n                this._classes.firstHandle\r\n            ];\r\n\r\n            if ( typeof restOptions[0] !== \"string\" ||\r\n                !classNames.includes(restOptions[0] as keyof UserOptions[\"classes\"]) ) {\r\n\r\n                this._throw(errors.classes.notExisting(restOptions[0] as string));\r\n\r\n                return { result: false };\r\n            }\r\n\r\n            let className: keyof Options[\"classes\"];\r\n\r\n            if ( restOptions[0] === this._classes.slider.main ) {\r\n                className = this._classes.slider.complete(this._options.orientation);\r\n            } else {\r\n                className = restOptions[0] as keyof Options[\"classes\"];\r\n            }\r\n\r\n            if ( typeof restOptions[1] !== \"string\" ) {\r\n                this._throw(errors.classes.customIsNotString);\r\n\r\n                return { result: false };\r\n            }\r\n\r\n            optionsCopy[option as \"classes\"][className] = restOptions[1] as keyof Options[\"classes\"];\r\n\r\n            if ( !this._checkOptions(optionsCopy) ) return { result: false };\r\n\r\n            return {\r\n                result: true,\r\n                options: optionsCopy\r\n            }\r\n        }\r\n    }\r\n\r\n    private _checkOptions(options: Options): boolean {\r\n        const defaults = SliderModel.getDefaultOptions(options.orientation);\r\n\r\n        const errors = SliderModel._optionsErrors;\r\n\r\n        const optionsKeys = Object.keys(options);\r\n        const defaultOptionsKeys = Object.keys(defaults);\r\n\r\n        if ( !arrayEquals(optionsKeys, defaultOptionsKeys) ) {\r\n            this._throw(errors.incorrectOptionsObject);\r\n\r\n            return false;\r\n        }\r\n\r\n        let mainClass: keyof typeof  options.classes;\r\n\r\n        for (mainClass in options.classes) {\r\n            if ( !options.classes.hasOwnProperty(mainClass) ) continue;\r\n\r\n            if ( mainClass.trim() !== mainClass ) {\r\n                this._throw(errors.classes.extraWs);\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        const classesKeys = Object.keys(options.classes);\r\n        const defaultClassesKeys = Object.keys(defaults.classes);\r\n\r\n        if ( !arrayEquals(classesKeys, defaultClassesKeys) ) {\r\n            this._throw(errors.classes.incorrectType);\r\n\r\n            return false;\r\n        }\r\n\r\n        for (mainClass in options.classes) {\r\n            if ( !options.classes.hasOwnProperty(mainClass) ) continue;\r\n\r\n            if ( typeof options.classes[mainClass] !== \"string\" ) {\r\n                this._throw(errors.options.incorrectType(\"classes\", \"string\"));\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        const checkType = (\r\n            type: \"string\" | \"number\" | \"boolean\",\r\n            options: Options, ...params: (keyof Options)[]\r\n        ): boolean => {\r\n            for ( const param of params ) {\r\n                if ( typeof options[param] !== type ) {\r\n                    this._throw(errors.options.incorrectType(param, type));\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        };\r\n\r\n        if ( !checkType(\"number\", options, \"min\", \"max\", \"step\") ) {\r\n            return false;\r\n        }\r\n\r\n        if ( typeof options.value !== \"number\" && !Array.isArray(options.value) ) {\r\n            this._throw(errors.value.incorrectType);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( options.orientation !== \"horizontal\" && options.orientation !== \"vertical\" ){\r\n            this._throw(errors.orientation.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( options.range !== \"min\" && options.range !== \"max\" && typeof options.range !== \"boolean\" ) {\r\n            this._throw(errors.range.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( options.range !== true && Array.isArray(options.value) ) {\r\n            this._throw(errors.value.rangeNotTrue);\r\n        }\r\n\r\n        if ( options.range === true && !Array.isArray(options.value) ) {\r\n            this._throw(errors.value.rangeTrue);\r\n        }\r\n\r\n        if ( Array.isArray(options.value) ) {\r\n            for (const value of options.value) {\r\n                if ( !(options.min <= value && options.max >= value) ) {\r\n                    this._throw(errors.value.beyond);\r\n\r\n                    return false;\r\n                }\r\n            }\r\n        } else {\r\n            if (!(options.min <= options.value && options.max >= options.value)) {\r\n                this._throw(errors.value.beyond);\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if ( options.step > (options.max - options.min) || options.step <= 0 ) {\r\n            this._throw(errors.step.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( typeof options.tooltip !== \"boolean\" && typeof options.tooltip !== \"function\") {\r\n            this._throw(errors.tooltip.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( typeof options.tooltip === \"function\" ) {\r\n            const result = options.tooltip(options.value);\r\n\r\n            if ( typeof result !== \"number\" && typeof result !== \"string\" ) {\r\n                this._throw(errors.tooltip.incorrectFunction);\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if ( options.animate !== false && options.animate !== \"slow\" && options.animate !== \"fast\"\r\n            && typeof options.animate !== \"number\" ) {\r\n            this._throw(errors.animate.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( typeof options.pips !== \"boolean\" ) {\r\n            this._throw(errors.pips.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( typeof options.labels !== \"function\" && typeof options.labels !== \"boolean\" ) {\r\n            this._throw(errors.labels.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( typeof options.labels === \"function\" ) {\r\n            const result = options.labels(options.value);\r\n            if ( typeof result !== \"string\" && typeof result !== \"number\" ) {\r\n                this._throw(errors.labels.incorrectFunction);\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if ( typeof options.change !== \"function\" && options.change !== false ) {\r\n            this._throw(errors.change.incorrect);\r\n\r\n            return false;\r\n        }\r\n\r\n        if ( typeof options.change === \"function\" ) {\r\n            const func = options.change;\r\n\r\n            if ( typeof func(options.value) !== \"undefined\" ) {\r\n                this._throw(errors.change.incorrectFunction);\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private _changeOrientationClass(\r\n        options: Options | UserOptions, type: \"user\" | \"result\",\r\n        orientation: \"horizontal\" | \"vertical\" | undefined\r\n    ): { result: boolean; options?: Options | UserOptions } {\r\n\r\n        if ( orientation !==  undefined && orientation !== \"horizontal\" && orientation !== \"vertical\" )  {\r\n            this._throw(SliderModel._optionsErrors.orientation.incorrect);\r\n\r\n            return { result: false };\r\n        }\r\n        if ( orientation === undefined ) orientation = \"horizontal\";\r\n\r\n        if ( type === \"user\" && options.classes && (options as UserOptions).classes[this._classes.slider.main] ) {\r\n            options.classes[this._classes.slider.complete(orientation)] =\r\n                (options as UserOptions).classes[this._classes.slider.main];\r\n\r\n            delete (options as UserOptions).classes[this._classes.slider.main];\r\n        }\r\n\r\n        if ( type === \"result\" ) {\r\n            let mainClass: keyof Options[\"classes\"];\r\n            const values: string[] = [];\r\n\r\n            for (mainClass in options.classes) {\r\n                if ( !options.classes.hasOwnProperty(mainClass) ) continue;\r\n\r\n                values.push(options.classes[mainClass]);\r\n\r\n                delete options.classes[mainClass];\r\n            }\r\n\r\n            options.classes[this._classes.slider.complete(orientation)] = values[0];\r\n            options.classes[this._classes.range] = values[1];\r\n            options.classes[this._classes.firstHandle] = values[2];\r\n        }\r\n\r\n        return {\r\n            result: true,\r\n            options: options\r\n        };\r\n    }\r\n\r\n    private _deleteWSFromUserCLasses(): void {\r\n        const classes = this._options.classes;\r\n        let key: keyof typeof classes;\r\n\r\n        for ( key in this._options.classes ) {\r\n            if ( !this._options.classes.hasOwnProperty(key) ) continue;\r\n\r\n            if ( this._options.classes[key] !== \"\" ) {\r\n                this._options.classes[key] = this._options.classes[key]\r\n                    .trim()\r\n                    .replace(/\\s+/g, \" \");\r\n            }\r\n        }\r\n    }\r\n\r\n    private _throw(error: string): void {\r\n        this._incorrectOptionsReceivedSubject.notifyObservers(error);\r\n    }\r\n}\r\n\r\nexport default SliderModel;\r\n\r\n\r\n","const arrayEquals = (firstArray: any[], secondArray: any[]): boolean => {\r\n\r\n    if (!firstArray || !secondArray) return false;\r\n\r\n    if (firstArray.length !== secondArray.length) return false;\r\n\r\n    for (let i = 0; i < firstArray.length; i++) {\r\n        // Check if we have nested arrays\r\n        if (firstArray[i] instanceof Array && secondArray[i] instanceof Array) {\r\n            // recurse into the nested arrays\r\n            if (!arrayEquals(firstArray[i], secondArray[i])) return false;\r\n        }\r\n        else if (firstArray[i] !== secondArray[i]) {\r\n            // Warning - two different object instances\r\n            // will never be equal: {x:20} != {x:20}\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n};\r\n\r\nexport default arrayEquals;\r\n","import {HorizontalClasses, Options, VerticalClasses} from \"./SliderModel\";\r\nimport { countShift, Shift } from \"../../functions/common/countShift\";\r\nimport getCoords, {Coords} from \"../../functions/common/getCoords\";\r\nimport Observer from \"../Observer\";\r\nimport SliderTooltipView from \"../SliderTooltipView\";\r\nimport SliderLabelsView from \"../SliderLabelsView\";\r\n\r\ninterface Html {\r\n    wrapper: HTMLDivElement | null;\r\n    range: HTMLDivElement | null;\r\n    firstHandle: HTMLDivElement | null;\r\n    secondHandle: HTMLDivElement | null;\r\n}\r\nexport default class SliderView {\r\n    private _html: Html | null = null;\r\n\r\n    private _root: HTMLElement | null = null;\r\n    private _options: Options | null = null;\r\n    private _classesHash: Options[\"classes\"] | null = null;\r\n    private _handlesPositionInPixels: number[] | null = null;\r\n\r\n    private _data = {\r\n        rendered: false\r\n    };\r\n\r\n    private _eventListeners = {\r\n        handleMoving: {\r\n            handleMouseDown: (mouseDownEvent: MouseEvent): false => {\r\n                let freeSpaceCoords: Coords;\r\n                const targetHandle = mouseDownEvent.target;\r\n\r\n                const orientation = this._options.orientation;\r\n\r\n                if ( this._options.range !== true && targetHandle === this._html.firstHandle ) {\r\n                    freeSpaceCoords = this._getCoords().wrapper;\r\n                }\r\n\r\n                if ( this._options.range === true ) {\r\n                    freeSpaceCoords = this._getCoords().wrapper;\r\n\r\n                    const firstHandleCoords = this._getCoords().firstHandle;\r\n                    const secondHandleCoords = this._getCoords().secondHandle;\r\n\r\n                    if ( targetHandle === this._html.firstHandle ) {\r\n                        if ( orientation === \"horizontal\" ) {\r\n                            freeSpaceCoords.right = secondHandleCoords.left -\r\n                                firstHandleCoords.width / 2;\r\n\r\n                            freeSpaceCoords.width = freeSpaceCoords.right - freeSpaceCoords.left;\r\n                        }\r\n\r\n                        if ( orientation === \"vertical\" ) {\r\n                            freeSpaceCoords.top = secondHandleCoords.bottom + firstHandleCoords.height / 2;\r\n\r\n                            freeSpaceCoords.height = freeSpaceCoords.bottom - freeSpaceCoords.top;\r\n                        }\r\n                    }\r\n\r\n                    if ( targetHandle === this._html.secondHandle ) {\r\n                        if ( orientation === \"horizontal\" ) {\r\n                            freeSpaceCoords.left = firstHandleCoords.right +\r\n                                secondHandleCoords.width / 2;\r\n\r\n                            freeSpaceCoords.width = freeSpaceCoords.right - freeSpaceCoords.left;\r\n                        }\r\n\r\n                        if ( orientation === \"vertical\" ) {\r\n                            freeSpaceCoords.bottom = firstHandleCoords.top - secondHandleCoords.height / 2;\r\n                            freeSpaceCoords.height = freeSpaceCoords.bottom - freeSpaceCoords.top;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                let handleNumber: \"first\" | \"second\";\r\n\r\n                if ( targetHandle === this._html.firstHandle ) handleNumber = \"first\";\r\n                if ( targetHandle === this._html.secondHandle ) handleNumber = \"second\";\r\n\r\n                const handleShift = this._countHandleShift(mouseDownEvent, handleNumber);\r\n\r\n                const mouseMoveHandler = (mouseMoveEvent: MouseEvent) => {\r\n                    if ( this._options.orientation === \"horizontal\" ) {\r\n                        const shiftX = handleShift.x;\r\n\r\n                        let newLeft = mouseMoveEvent.pageX - shiftX - freeSpaceCoords.left;\r\n\r\n                        if (newLeft < 0 - this._getCoords().firstHandle.width / 2) {\r\n                            newLeft = 0 - this._getCoords().firstHandle.width / 2;\r\n                        }\r\n\r\n                        const rightEdge = freeSpaceCoords.width - this._getCoords().firstHandle.width;\r\n\r\n                        if (newLeft > rightEdge + this._getCoords().firstHandle.width / 2) {\r\n                            newLeft = rightEdge + this._getCoords().firstHandle.width / 2;\r\n                        }\r\n\r\n                        const currentHandleXInPixels = freeSpaceCoords.left +\r\n                            newLeft + this._getCoords().firstHandle.width / 2;\r\n\r\n                        this.refreshValue(currentHandleXInPixels, handleNumber);\r\n                    }\r\n\r\n                    if ( this._options.orientation === \"vertical\" ) {\r\n                        const shiftY = handleShift.y;\r\n\r\n                        let newTop = mouseMoveEvent.pageY - shiftY - freeSpaceCoords.top;\r\n\r\n                        if (newTop < 0 - this._getCoords().firstHandle.height / 2) {\r\n                            newTop = 0 - this._getCoords().firstHandle.height / 2;\r\n                        }\r\n\r\n                        const rightEdge = freeSpaceCoords.height - this._getCoords().firstHandle.height;\r\n\r\n                        if (newTop > rightEdge + this._getCoords().firstHandle.height / 2) {\r\n                            newTop = rightEdge + this._getCoords().firstHandle.height / 2;\r\n                        }\r\n\r\n                        const currentHandleYInPixels = newTop + this._getCoords().firstHandle.height / 2\r\n                            + freeSpaceCoords.top;\r\n\r\n                        this.refreshValue(currentHandleYInPixels, handleNumber);\r\n                    }\r\n                };\r\n\r\n                document.addEventListener(\"mousemove\", mouseMoveHandler);\r\n\r\n                const mouseUpHandler = (): void => {\r\n                    document.removeEventListener(\"mousemove\", mouseMoveHandler);\r\n                    document.removeEventListener(\"mouseup\", mouseUpHandler);\r\n                };\r\n\r\n                document.addEventListener(\"mouseup\", mouseUpHandler);\r\n\r\n                return false;\r\n            },\r\n            handleOnDragStart: (): false => {\r\n                return false;\r\n            }\r\n        },\r\n        sliderClick: (clickEvent: MouseEvent): void => {\r\n            if ( clickEvent.target === this._html.firstHandle\r\n                || clickEvent.target === this._html.secondHandle ) {\r\n                return;\r\n            }\r\n\r\n            let coordinateToMove: number;\r\n            let handleNumber: \"first\" | \"second\" = \"first\";\r\n\r\n            if ( this._options.orientation === \"horizontal\" ) {\r\n                coordinateToMove = clickEvent.pageX;\r\n            }\r\n\r\n            if ( this._options.orientation === \"vertical\" ) {\r\n                coordinateToMove = clickEvent.pageY;\r\n            }\r\n\r\n            if ( this._options.range === true ) {\r\n                handleNumber = this._getClosestHandleNumber(coordinateToMove);\r\n            }\r\n\r\n            this.refreshValue(coordinateToMove, handleNumber);\r\n        }\r\n    };\r\n\r\n    private _valueChangedSubject = new Observer();\r\n\r\n    whenValueChanged(callback: (valueData: [number, \"first\" | \"second\"]) => void): void {\r\n        this._valueChangedSubject.addObserver((valueData: [number, \"first\" | \"second\"]) => {\r\n            callback(valueData);\r\n        })\r\n    }\r\n\r\n    get html(): Html {\r\n        return this._html;\r\n    }\r\n\r\n    get value(): number | number[] {\r\n        return this._options.value;\r\n    }\r\n\r\n    render(root: HTMLElement): void {\r\n        this._root = root;\r\n        this._root.append(this._html.wrapper);\r\n\r\n        this._data.rendered = true;\r\n\r\n        this._setHandlePositionInPixels();\r\n\r\n        this._renderOptions();\r\n    }\r\n\r\n    destroy(): void {\r\n        this._html = undefined;\r\n        this._root = undefined;\r\n        this._options = undefined;\r\n        this._handlesPositionInPixels = undefined;\r\n\r\n        this._data.rendered = false;\r\n    }  \r\n\r\n    cleanDom(): void {\r\n        if ( !!this._root || this._root.contains(this._html.wrapper) ) {\r\n            this._html.wrapper.remove();\r\n        }\r\n\r\n        this._data.rendered = false;\r\n    }\r\n\r\n    setOptions(options: Options): void {\r\n        this._options = options;\r\n\r\n        const wasRendered = this._data.rendered;\r\n\r\n        let rootSnapshot: null | HTMLElement = null;\r\n\r\n        if ( wasRendered ) {\r\n            rootSnapshot = this._root;\r\n\r\n            this.cleanDom();\r\n        }\r\n\r\n        this._setSliderElements();\r\n        this._setHandleMovingHandler();\r\n        this._setSliderClickHandler();\r\n\r\n        this._setSliderClasses();\r\n        this._setTransition();\r\n        this._setHandlePositionInPixels();\r\n\r\n        if ( wasRendered ) {\r\n            this.render(rootSnapshot);\r\n        }\r\n    }\r\n\r\n    updateHandlePosition(value: Options[\"value\"]): void {\r\n        this._options.value = value;\r\n\r\n        this._setHandlePositionInPixels();\r\n        this._renderHandlePositions();\r\n        this._renderRange();\r\n    }\r\n\r\n    private _renderOptions(): void {\r\n        if ( !this._data.rendered ) return;\r\n\r\n        this._renderHandlePositions();\r\n\r\n        this._renderRange();\r\n    }\r\n\r\n    private _setHandleMovingHandler(): void {\r\n        const addHandleMovingHandler = (handle: HTMLElement): void => {\r\n            handle.addEventListener(\"mousedown\", this._eventListeners.handleMoving.handleMouseDown);\r\n\r\n            handle.ondragstart = this._eventListeners.handleMoving.handleOnDragStart;\r\n        };\r\n\r\n        addHandleMovingHandler(this._html.firstHandle);\r\n\r\n        if ( this._options.range === true ) {\r\n            addHandleMovingHandler(this._html.secondHandle);\r\n        }\r\n    }\r\n\r\n    private _setSliderClickHandler(): void {\r\n        this._html.wrapper.addEventListener(\"click\", this._eventListeners.sliderClick);\r\n    }\r\n\r\n    private _renderHandlePositions(): void {\r\n        const renderHandlePosition = (handleNumber: \"first\" | \"second\") => {\r\n            const handle = handleNumber === \"first\" ? this._html.firstHandle : this._html.secondHandle;\r\n            const handleCoords = handleNumber === \"first\" ? this._getCoords().firstHandle :\r\n                this._getCoords().secondHandle;\r\n\r\n            const handlePositionInPixels = this._handlesPositionInPixels[handleNumber === \"first\" ? 0 : 1];\r\n\r\n            if ( this._options.orientation === \"horizontal\" ) {\r\n                handle.style.left = handlePositionInPixels - handleCoords.width / 2 + \"px\";\r\n            }\r\n            if ( this._options.orientation === \"vertical\" ) {\r\n                handle.style.bottom = handlePositionInPixels - handleCoords.height / 2 + \"px\";\r\n            }\r\n        };\r\n\r\n        renderHandlePosition(\"first\");\r\n\r\n        if ( this._options.range === true ) renderHandlePosition(\"second\");\r\n    }\r\n\r\n    private _renderRange() {\r\n        const positions = this._handlesPositionInPixels;\r\n        const wrapperCoords = this._getCoords().wrapper;\r\n\r\n        if ( this._options.orientation === \"horizontal\" ) {\r\n            if (this._options.range === \"min\") {\r\n                this._html.range.style.left = 0 + \"px\";\r\n                this._html.range.style.width = positions[0] + \"px\";\r\n            }\r\n\r\n            if (this._options.range === \"max\") {\r\n                this._html.range.style.right = 0 + \"px\";\r\n                this._html.range.style.width = wrapperCoords.width -\r\n                    positions[0] + \"px\";\r\n            }\r\n\r\n            if ( this._options.range === true ) {\r\n                this._html.range.style.left = positions[0] + \"px\";\r\n                this._html.range.style.right = positions[1] + \"px\";\r\n                this._html.range.style.width = positions[1] - positions[0] + \"px\";\r\n            }\r\n        }\r\n        if ( this._options.orientation === \"vertical\" ) {\r\n            if (this._options.range === \"min\") {\r\n                this._html.range.style.bottom = 0 + \"px\";\r\n                this._html.range.style.height = positions[0] + \"px\";\r\n            }\r\n\r\n            if (this._options.range === \"max\") {\r\n                this._html.range.style.top = 0 + \"px\";\r\n                this._html.range.style.height = wrapperCoords.height -\r\n                    positions[0] + \"px\";\r\n            }\r\n\r\n            if ( this._options.range === true ) {\r\n                this._html.range.style.top = wrapperCoords.height - positions[1] + \"px\";\r\n                this._html.range.style.bottom = positions[0] + \"px\";\r\n                this._html.range.style.height = positions[0] - positions[1] + \"px\";\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private _setSliderClasses(): void {\r\n        // if ( this._classesHash && !this._hasClassesChanged() ) return;\r\n\r\n        const defaultClasses = Object.keys(this._options.classes) as\r\n            (keyof (VerticalClasses | HorizontalClasses))[];\r\n        const wrapper = defaultClasses[0];\r\n        const range = defaultClasses[1];\r\n        const handle = defaultClasses[2];\r\n\r\n        this._html.wrapper.setAttribute(\"class\", wrapper);\r\n        this._html.range.setAttribute(\"class\", range);\r\n        this._html.firstHandle.setAttribute(\"class\", handle);\r\n\r\n        this._html.wrapper.style.position = \"relative\";\r\n        this._html.range.style.position = \"absolute\";\r\n        this._html.firstHandle.style.position = \"absolute\";\r\n\r\n        $(this._html.wrapper).addClass(this._options.classes[wrapper]);\r\n        $(this._html.range).addClass(this._options.classes[range]);\r\n        $(this._html.firstHandle).addClass(this._options.classes[handle]);\r\n\r\n        if ( this._html.secondHandle ) {\r\n            this._html.secondHandle.setAttribute(\"class\", handle);\r\n            this._html.secondHandle.style.position = \"absolute\";\r\n            $(this._html.secondHandle).addClass(this._options.classes[handle]);\r\n        }\r\n\r\n        // this._classesHash = $.extend({}, this._options.classes);\r\n    }\r\n\r\n    private _setTransition(): void {\r\n        const animate = this._options.animate;\r\n\r\n        const handleProp = this._options.orientation === \"horizontal\" ? \"left\" : \"bottom\";\r\n        // const rangeProp = this._options.orientation === \"horizontal\" ? \"width\" : \"height\";\r\n\r\n        const transitionMs: number = animate === \"fast\" ? 300 :\r\n            animate === \"slow\" ? 700 : typeof animate === \"number\" ? animate : 0;\r\n\r\n        this._html.firstHandle.style.transition = `${handleProp} ${transitionMs}ms`;\r\n        this._html.range.style.transition = `${transitionMs}ms`;\r\n\r\n        const addTransitionToHandle = (handle: HTMLElement) => {\r\n            handle.addEventListener(\"mousedown\", () => {\r\n                handle.style.transition = \"0ms\";\r\n                this._html.range.style.transition = \"0ms\";\r\n            });\r\n\r\n            document.addEventListener(\"mouseup\", () => {\r\n                handle.style.transition = `${handleProp} ${transitionMs}ms`;\r\n                this._html.range.style.transition = `${transitionMs}ms`;\r\n            });\r\n        };\r\n\r\n        addTransitionToHandle(this._html.firstHandle);\r\n\r\n        if ( this._options.range === true ) {\r\n            addTransitionToHandle(this._html.secondHandle);\r\n        }\r\n    }\r\n\r\n    private _setHandlePositionInPixels(): void {\r\n        if ( !this._data.rendered ) return;\r\n\r\n        this._handlesPositionInPixels = null;\r\n        this._handlesPositionInPixels = [];\r\n\r\n        const range = this._options.max - this._options.min;\r\n\r\n        const firstValueInPercents = ( (this._options.range === true ? (this._options.value as number[])[0] :\r\n            this._options.value as number) - this._options.min ) / range;\r\n\r\n        const addHandlePosition = (handleValueInPercents: number): void => {\r\n            this._handlesPositionInPixels.push(this._options.orientation === \"horizontal\" ?\r\n                this._getCoords().wrapper.width * handleValueInPercents :\r\n                this._getCoords().wrapper.height * handleValueInPercents\r\n            );\r\n        };\r\n\r\n        addHandlePosition(firstValueInPercents);\r\n\r\n        if ( this._options.range === true ) {\r\n            const secondValueInPercents = ( (this._options.value as number[])[1] - this._options.min) / range;\r\n\r\n            addHandlePosition(secondValueInPercents);\r\n        }\r\n\r\n    }\r\n\r\n    refreshValue(currentHandleCoordinate: number, handleNumber?: \"first\" | \"second\"): void {\r\n        if ( !handleNumber ) {\r\n            if ( this._options.range !== true ) handleNumber = \"first\";\r\n                else {\r\n                    handleNumber = this._getClosestHandleNumber(currentHandleCoordinate);\r\n            }\r\n        }\r\n        const range = this._options.max - this._options.min;\r\n        const orientation = this._options.orientation;\r\n        const wrapperCoords = this._getCoords().wrapper;\r\n\r\n        const isHorizontal = orientation === \"horizontal\";\r\n\r\n        const wrapperStart =  isHorizontal ? wrapperCoords.left : wrapperCoords.top;\r\n        const wrapperEnd =  isHorizontal ? wrapperCoords.right : wrapperCoords.bottom;\r\n\r\n        if ( currentHandleCoordinate > wrapperEnd ) {\r\n            this._valueChangedSubject\r\n                .notifyObservers([isHorizontal ? this._options.max : this._options.min, handleNumber]);\r\n\r\n            return;\r\n        }\r\n\r\n        if ( currentHandleCoordinate < wrapperStart ) {\r\n            this._valueChangedSubject\r\n                .notifyObservers([isHorizontal ? this._options.min : this._options.max, handleNumber]);\r\n\r\n            return;\r\n        }\r\n\r\n        const currentHandlePosition = orientation === \"horizontal\" ?\r\n            currentHandleCoordinate - wrapperCoords.left :\r\n            wrapperCoords.height - (currentHandleCoordinate - wrapperCoords.top);\r\n\r\n        const getValuesArray = (): number[] => {\r\n            const valuesArray: number[] = [];\r\n\r\n            for ( let currentValue = this._options.min;\r\n                  currentValue <= this._options.max; currentValue += this._options.step ) {\r\n\r\n                valuesArray.push(currentValue);\r\n            }\r\n\r\n            return valuesArray;\r\n        };\r\n\r\n        const valuesArray = getValuesArray();\r\n\r\n        const valueInPercents = this._options.orientation === \"horizontal\" ?\r\n            currentHandlePosition / this._getCoords().wrapper.width :\r\n            currentHandlePosition / this._getCoords().wrapper.height;\r\n\r\n        const approximateValue = valueInPercents * range + this._options.min;\r\n\r\n        let value: number;\r\n\r\n        for (let i = 0; i < valuesArray.length; i++ ) {\r\n            if ( approximateValue >= valuesArray[i] && approximateValue <= valuesArray[i + 1] ) {\r\n                const rangeFromFirst = approximateValue - valuesArray[i];\r\n                const rangeFromSecond = valuesArray[i + 1] - approximateValue;\r\n\r\n                value = rangeFromFirst < rangeFromSecond ?\r\n                    valuesArray[i] : valuesArray[i + 1];\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        this._valueChangedSubject.notifyObservers([value, handleNumber]);\r\n    }\r\n\r\n    private _setSliderElements(): void {\r\n        const secondHandle = this._options.range === true ? document.createElement(\"div\") : null;\r\n\r\n        this._html = {\r\n            wrapper: document.createElement(\"div\"),\r\n            range: document.createElement(\"div\"),\r\n            firstHandle: document.createElement(\"div\"),\r\n            secondHandle: secondHandle\r\n        };\r\n\r\n        this._html.wrapper.append(this._html.range);\r\n        this._html.wrapper.append(this._html.firstHandle);\r\n\r\n        if ( this._options.range === true ) this._html.wrapper.append(this._html.secondHandle);\r\n    }\r\n\r\n    private _countHandleShift(mouseDownEvent: MouseEvent, handleNumber: \"first\" | \"second\"): Shift {\r\n        const handle = handleNumber === \"first\" ? this._html.firstHandle : this._html.secondHandle;\r\n\r\n        return countShift(mouseDownEvent, handle);\r\n    }\r\n\r\n    private _hasClassesChanged(): boolean {\r\n        if ( !this._classesHash ) return true;\r\n\r\n        const classes = this._options.classes;\r\n        const hash = this._classesHash;\r\n\r\n        let mainClass: keyof Options[\"classes\"];\r\n\r\n        for (mainClass in this._options.classes ) {\r\n            if ( !this._options.classes.hasOwnProperty(mainClass) ) continue;\r\n\r\n            if ( !( mainClass in hash && classes[mainClass] === hash[mainClass] ) ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _getCoords() {\r\n        return {\r\n            wrapper: getCoords(this._html.wrapper),\r\n            range: getCoords(this._html.range),\r\n            firstHandle: getCoords(this._html.firstHandle),\r\n            secondHandle: this._options.range === true ? getCoords(this._html.secondHandle) : null\r\n        }\r\n    }\r\n\r\n    private _getClosestHandleNumber(coordinate: number): \"first\" | \"second\" {\r\n        let handleNumber: \"first\" | \"second\";\r\n\r\n        if ( this._options.range !== true ) return;\r\n\r\n        if ( this._options.orientation === \"horizontal\" ) {\r\n            const firstRight = this._getCoords().firstHandle.right;\r\n            const secondLeft = this._getCoords().secondHandle.left;\r\n\r\n            if ( coordinate < secondLeft && coordinate > firstRight ) {\r\n                const firstDistance = coordinate - firstRight;\r\n                const secondDistance = secondLeft - coordinate;\r\n\r\n                handleNumber = firstDistance > secondDistance ? \"second\" : \"first\";\r\n            }\r\n\r\n            if ( coordinate < firstRight ) handleNumber = \"first\";\r\n            if ( coordinate > secondLeft ) handleNumber = \"second\";\r\n        }\r\n\r\n        if ( this._options.orientation === \"vertical\" ) {\r\n            const firstTop = this._getCoords().firstHandle.top;\r\n            const secondBottom = this._getCoords().secondHandle.bottom;\r\n\r\n            if ( coordinate > secondBottom && coordinate < firstTop ) {\r\n                const firstDistance = firstTop - coordinate;\r\n                const secondDistance = coordinate - secondBottom;\r\n\r\n                handleNumber = firstDistance > secondDistance ? \"second\" : \"first\";\r\n            }\r\n\r\n            if ( coordinate > firstTop ) handleNumber = \"first\";\r\n            if ( coordinate < secondBottom ) handleNumber = \"second\";\r\n        }\r\n\r\n        return handleNumber;\r\n    }\r\n\r\n    renderPlugin(\r\n        plugin: string,\r\n        pluginView: SliderLabelsView | SliderTooltipView,\r\n        number?: \"first\" | \"second\"\r\n    ): void {\r\n        if ( plugin === \"labels\" ) {\r\n            pluginView.render(this._html.wrapper);\r\n        }\r\n\r\n        if ( plugin === \"tooltip\" ) {\r\n            if ( !number ) number = \"first\";\r\n\r\n            if ( number === \"first\" ) {\r\n                if ( !this._html.firstHandle.contains((pluginView as SliderTooltipView).html) ) {\r\n                    pluginView.render(this._html.firstHandle);\r\n                }\r\n            }\r\n\r\n            if ( number === \"second\" ) {\r\n                if ( this._html.secondHandle &&\r\n                    !this._html.firstHandle.contains((pluginView as SliderTooltipView).html) ) {\r\n                    pluginView.render(this._html.secondHandle);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    destroyPlugin(plugin: \"labels\" | \"tooltip\", pluginView: SliderLabelsView | SliderTooltipView): void {\r\n        if ( plugin === \"labels\" || plugin === \"tooltip\" ) {\r\n            pluginView.destroy();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import getCoords from \"./getCoords\";\r\n\r\nexport interface Shift {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport const countShift = (event: MouseEvent, elem: HTMLElement): Shift => {\r\n    const elemCoords = getCoords(elem);\r\n\r\n    return {\r\n        x: event.pageX - elemCoords.left,\r\n        y: event.pageY - elemCoords.top\r\n    };\r\n};","import SliderView from \"./SliderView\";\r\nimport SliderModel, {Options, UserOptions} from \"./SliderModel\";\r\nimport SliderTooltipView from \"../SliderTooltipView\";\r\nimport SliderLabelsView, {LabelOptions} from \"../SliderLabelsView\";\r\nimport SliderPluginsFactory from \"../SliderPluginsFactory\";\r\n\r\nclass SliderPresenter {\r\n    private _data: { setUp: boolean; rendered: boolean } = {\r\n        setUp: false,\r\n        rendered: false\r\n    };\r\n\r\n    private _pluginsFactory = new SliderPluginsFactory();\r\n\r\n    private _plugins = {\r\n        tooltipView: {\r\n            first: this._pluginsFactory.createView(\"tooltip\") as SliderTooltipView,\r\n            second: this._pluginsFactory.createView(\"tooltip\") as SliderTooltipView,\r\n        },\r\n        labelsView: this._pluginsFactory.createView(\"labels\") as SliderLabelsView\r\n    };\r\n\r\n    constructor(private _view: SliderView, private _model: SliderModel) {\r\n        this._model.whenOptionsSet(this.setOptionsToViewCallback());\r\n        this._model.whenOptionsAreIncorrect(this.showErrorMessageCallback());\r\n\r\n        this._view.whenValueChanged(this.validateValueCallback());\r\n\r\n        this._model.whenValueUpdated(this.renderHandlePositionCallback());\r\n\r\n        this._plugins.labelsView.whenUserClicksOnLabel((middleCoordinate: number) => {\r\n            this._view.refreshValue(middleCoordinate);\r\n        });\r\n    }\r\n\r\n    get view(): SliderView {\r\n        return this._view;\r\n    }\r\n\r\n    get model(): SliderModel {\r\n        return this._model;\r\n    }\r\n\r\n    initialize(root: HTMLElement, userOptions?: UserOptions): void {\r\n        if ( this._data.rendered ) {\r\n            throw new Error(\"Slider is already initialized\");\r\n        }\r\n\r\n        if ( !this._data.setUp ) this.setOptions(userOptions);\r\n\r\n        if ( !this._data.rendered ) this.render(root);\r\n    }\r\n\r\n    setOptions(\r\n        options?: UserOptions | keyof Options,\r\n        ...restOptions:\r\n            (UserOptions[keyof UserOptions] | UserOptions[\"classes\"][keyof UserOptions[\"classes\"]])[]\r\n    ): void {\r\n        this._model.setOptions(options, ...restOptions);\r\n\r\n        this._data.setUp = true;\r\n    }\r\n\r\n    getOptions(\r\n        option?: keyof Options,\r\n        className?: keyof UserOptions[\"classes\"]\r\n    ): Options | Options[keyof Options] |\r\n        Options[\"classes\"][keyof Options[\"classes\"]] {\r\n        if ( !this._data.setUp ) {\r\n            throw new Error(SliderModel.optionsErrors.notSet);\r\n        }\r\n\r\n        return this._model.getOptions(option, className);\r\n    }\r\n\r\n    render(root: HTMLElement): void {\r\n        if ( !this._data.setUp ) {\r\n            throw new Error(\"Slider isn't setUp\");\r\n        }\r\n        if ( this._data.rendered ) {\r\n            throw new Error(\"Slider is already rendered\");\r\n        }\r\n\r\n        this._view.render(root);\r\n\r\n        const firstTooltipView = this._plugins.tooltipView.first;\r\n        const secondTooltipView = this._plugins.tooltipView.second;\r\n        const labelsView = this._plugins.labelsView;\r\n\r\n        if ( labelsView.state.isSet ) {\r\n            this._view.renderPlugin(\"labels\", labelsView);\r\n        }\r\n\r\n        if ( firstTooltipView.state.isSet ) {\r\n            this._view.renderPlugin(\"tooltip\", firstTooltipView, \"first\");\r\n        }\r\n\r\n        if ( secondTooltipView.state.isSet ) {\r\n            this._view.renderPlugin(\"tooltip\", secondTooltipView, \"second\");\r\n        }\r\n\r\n        this._data.rendered = true;\r\n    }\r\n\r\n    destroy(): void {\r\n        if ( !this._data.setUp ) {\r\n            throw new Error(\"Slider isn't initialized yet\");\r\n        }\r\n\r\n        if ( this._data.rendered !== false ) this._view.cleanDom();\r\n\r\n        this._view.destroy();\r\n        this._model.destroy();\r\n\r\n        this._data.setUp = false;\r\n        this._data.rendered = false;\r\n    }\r\n\r\n    off(): void {\r\n        if ( !this._data.rendered ) {\r\n            throw new Error(\"Slider isn't rendered\");\r\n        }\r\n\r\n        this._view.cleanDom();\r\n\r\n        this._data.rendered = false;\r\n    }\r\n\r\n    setOptionsToViewCallback() {\r\n        return (): void => {\r\n            const options = this._model.getOptions() as Options;\r\n\r\n            this._view.setOptions(options);\r\n\r\n            this._toggleTooltip(options);\r\n            this._toggleLabels(options);\r\n        }\r\n    }\r\n\r\n    private _toggleTooltip(options: Options): void {\r\n        const firstTooltipView = this._plugins.tooltipView.first;\r\n        const secondTooltipView = this._plugins.tooltipView.second;\r\n\r\n        if ( options.tooltip ) {\r\n            if ( options.range !== true ) {\r\n                firstTooltipView.setOptions((options.value as number), options.orientation,\r\n                    typeof options.tooltip === \"function\" ? options.tooltip : null);\r\n            } else {\r\n                firstTooltipView.setOptions((options.value as number[])[0], options.orientation,\r\n                    typeof options.tooltip === \"function\" ? options.tooltip : null);\r\n\r\n                secondTooltipView.setOptions((options.value as number[])[1], options.orientation,\r\n                    typeof options.tooltip === \"function\" ? options.tooltip : null);\r\n            }\r\n\r\n            if ( this._data.rendered ) {\r\n                this._view.renderPlugin(\"tooltip\", firstTooltipView, \"first\");\r\n\r\n                if ( options.range === true ) {\r\n                    this._view.renderPlugin(\"tooltip\", secondTooltipView, \"second\");\r\n                }\r\n            }\r\n\r\n        } else if ( firstTooltipView.state.isRendered ) {\r\n            this._view.destroyPlugin(\"tooltip\", firstTooltipView);\r\n\r\n            if ( options.range === true && secondTooltipView.state.isRendered ) {\r\n                this._view.destroyPlugin(\"tooltip\", secondTooltipView);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _toggleLabels(options: Options): void {\r\n        const labelsView = this._plugins.labelsView;\r\n\r\n        if ( options.labels || options.pips ) {\r\n            const labels = typeof options.labels === \"function\" ? true : options.labels;\r\n\r\n            const labelsOptions: LabelOptions = {\r\n                labels: labels,\r\n                pips: options.pips,\r\n                orientation: options.orientation,\r\n                min: options.min,\r\n                max: options.max,\r\n                step: options.step,\r\n            };\r\n\r\n            if ( typeof options.labels === \"function\" ) {\r\n                labelsOptions.valueFunc = options.labels;\r\n            }\r\n\r\n            labelsView.setOptions(labelsOptions);\r\n\r\n\r\n            if ( this._data.rendered ) this._view.renderPlugin(\"labels\", labelsView);\r\n        } else if ( labelsView.state.isRendered ) {\r\n            this._view.destroyPlugin(\"labels\", labelsView);\r\n        }\r\n    }\r\n\r\n    showErrorMessageCallback() {\r\n        return (error: string): void => {\r\n            throw new Error(error);\r\n        };\r\n    }\r\n\r\n    validateValueCallback() {\r\n        return (valueData: [number, \"first\" | \"second\"]): void => {\r\n            this._model.refreshValue(valueData);\r\n        }\r\n    }\r\n\r\n    renderHandlePositionCallback() {\r\n        return (): void => {\r\n            const options = this._model.getOptions() as Options;\r\n\r\n            const value = options.value;\r\n            const tooltip = options.tooltip;\r\n            const range = options.range;\r\n            const change = options.change;\r\n\r\n            const firstTooltipView = this._plugins.tooltipView.first;\r\n            const secondTooltipView = this._plugins.tooltipView.second;\r\n\r\n            this._view.updateHandlePosition(value);\r\n\r\n            if ( firstTooltipView.state.isRendered ) {\r\n                firstTooltipView.setText(range !== true ? value as number : (value as number[])[0],\r\n                    typeof tooltip === \"function\" ? tooltip : null\r\n                );\r\n            }\r\n\r\n            if ( secondTooltipView.state.isRendered ) {\r\n                secondTooltipView.setText(range !== true ? value as number : (value as number[])[1],\r\n                    typeof tooltip === \"function\" ? tooltip : null\r\n                );\r\n            }\r\n\r\n            if ( !!change && typeof change === \"function\" ) {\r\n                change(options.value);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default SliderPresenter;\r\n","import SliderLabelsView from \"./SliderLabelsView\";\r\nimport SliderTooltipView from \"./SliderTooltipView\";\r\n\r\nexport default class SliderPluginsFactory {\r\n    createView(plugin: string): SliderLabelsView | SliderTooltipView {\r\n        if ( plugin === \"labels\" ) {\r\n            return new SliderLabelsView();\r\n        }\r\n\r\n        if ( plugin === \"tooltip\" ) {\r\n            return new SliderTooltipView();\r\n        }\r\n    }\r\n}\r\n","import getCoords from \"../functions/common/getCoords\";\r\nimport Observer from \"./Observer\";\r\n\r\nexport interface LabelOptions {\r\n    labels: boolean;\r\n    pips: boolean;\r\n    orientation: \"horizontal\" | \"vertical\";\r\n    min: number;\r\n    max: number;\r\n    step: number;\r\n    valueFunc?: (value?: number) => string | number;\r\n}\r\n\r\nexport default class SliderLabelsView {\r\n    private _labels: HTMLDivElement[];\r\n    private _options: LabelOptions;\r\n    private _root: HTMLElement | null = null;\r\n    private _html: HTMLDivElement | null = null;\r\n\r\n    private _labelClickedSubject = new Observer();\r\n\r\n    get state(): { isRendered: boolean; isSet: boolean } {\r\n        return {\r\n            isRendered: !!(this._root && this._html),\r\n            isSet: !!(this._options && this._labels)\r\n        };\r\n    }\r\n\r\n    get labels(): HTMLDivElement[] {\r\n        return this._labels;\r\n    }\r\n\r\n    setOptions(options: LabelOptions): void {\r\n        if ( !options.labels && !options.pips ) return;\r\n\r\n        let rootSnapshot: HTMLElement;\r\n\r\n        if ( this.state.isRendered ) {\r\n            rootSnapshot = this._root;\r\n            this.destroy();\r\n        }\r\n\r\n        this._options = options;\r\n\r\n        this._createLabels();\r\n        this._setClasses();\r\n        if ( this._options.labels ) this._setText();\r\n        this._setClickHandler();\r\n\r\n        if ( rootSnapshot ) {\r\n            this.render(rootSnapshot);\r\n        }\r\n    }\r\n\r\n    render(root: HTMLElement): void {\r\n        this._root = root;\r\n\r\n        const orientation = this._options.orientation;\r\n        const scaleProperty = orientation === \"horizontal\" ? \"width\" : \"height\";\r\n        const labelProperty = orientation === \"horizontal\" ? \"left\" : \"bottom\";\r\n\r\n        const sliderPropertyValue = getCoords(root)[scaleProperty];\r\n\r\n        const scale = document.createElement(\"div\");\r\n        scale.setAttribute(\"class\",\r\n            `jquery-slider-labels-scale jquery-slider-labels-scale-${orientation}`);\r\n        scale.style.position = \"absolute\";\r\n        scale.style[scaleProperty] = sliderPropertyValue + \"px\";\r\n\r\n        const interval = this._getInterval(sliderPropertyValue);\r\n\r\n        let currentSize = 0;\r\n\r\n        this._root.append(scale);\r\n\r\n        for ( const label of this._labels ) {\r\n            scale.append(label);\r\n\r\n            const labelPropertyValue = getCoords(label)[scaleProperty];\r\n            label.style[labelProperty] = currentSize - labelPropertyValue / 2 + \"px\";\r\n\r\n            if ( this._options.pips ) {\r\n                const pip = label.children[0] as HTMLElement;\r\n                const pipPropertyValue = getCoords(pip)[scaleProperty];\r\n\r\n                pip.style[labelProperty] = labelPropertyValue / 2 - pipPropertyValue / 2 + \"px\";\r\n            }\r\n\r\n            currentSize += interval;\r\n        }\r\n\r\n        this._html = scale;\r\n    }\r\n\r\n    remove(): void {\r\n        this._root.removeChild(this._html);\r\n\r\n        this._root = null;\r\n        this._html = null;\r\n    }\r\n\r\n    destroy(): void {\r\n        if ( this.state.isRendered ) this.remove();\r\n        this._labels = null;\r\n        this._options = null;\r\n    }\r\n\r\n    whenUserClicksOnLabel(callback: (middleCoordinate: number) => void): void {\r\n        this._labelClickedSubject.addObserver((_middleCoordinate: number) => {\r\n            callback(_middleCoordinate);\r\n        });\r\n    }\r\n\r\n    private _createLabels(): void {\r\n        const labels: HTMLDivElement[] = [];\r\n\r\n        for ( let value = this._options.min; value <= this._options.max; value += this._options.step ) {\r\n            labels.push(this._getLabel());\r\n        }\r\n\r\n        this._labels = labels;\r\n    }\r\n\r\n    private _getLabel(): HTMLDivElement  {\r\n        const label = document.createElement(\"div\");\r\n        const pip = document.createElement(\"div\");\r\n\r\n        label.setAttribute(\"class\", \"jquery-slider-label\");\r\n        pip.setAttribute(\"class\", \"jquery-slider-pip\");\r\n\r\n        label.style.position = \"absolute\";\r\n        pip.style.position = \"absolute\";\r\n\r\n        if ( this._options.pips ) label.append(pip);\r\n\r\n        return label;\r\n    }\r\n\r\n    private _setClasses(): void {\r\n        const orientation = this._options.orientation;\r\n\r\n        if ( !(this._options.labels) && !(this._options.pips) ) return;\r\n\r\n        for (const label of this._labels) {\r\n            label.setAttribute(\"class\", \"jquery-slider-label\");\r\n            label.classList.add(`jquery-slider-label-${orientation}`);\r\n\r\n            if ( this._options.pips ) {\r\n                const pip = label.children[0];\r\n\r\n                pip.setAttribute(\"class\", \"jquery-slider-pip\");\r\n                pip.classList.add(`jquery-slider-pip-${orientation}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _setText(): void {\r\n        if ( !this._options.labels ) return;\r\n\r\n        const func = this._options.valueFunc;\r\n\r\n        for ( let i = 0, value = this._options.min; i < this._labels.length; i++, value +=this._options.step ) {\r\n            const label = this._labels[i];\r\n\r\n            if ( func ) {\r\n                label.innerHTML += String(func(value));\r\n            } else label.innerHTML += String(value);\r\n        }\r\n    }\r\n\r\n    private _getInterval(scaleSize: number): number {\r\n        const range = this._options.max - this._options.min;\r\n        const amount = range / this._options.step;\r\n\r\n        return scaleSize / amount;\r\n    }\r\n\r\n    private _setClickHandler(): void {\r\n        for (const label of this._labels) {\r\n            label.addEventListener(\"click\", () => {\r\n                const labelCoords = getCoords(label);\r\n\r\n                const middle = this._options.orientation === \"horizontal\" ?\r\n                    labelCoords.left + labelCoords.width / 2 :\r\n                    labelCoords.top + labelCoords.height / 2;\r\n\r\n                this._labelClickedSubject.notifyObservers(middle);\r\n            });\r\n        }\r\n    }\r\n}\r\n","import {ValueFunction} from \"./Slider/SliderModel\";\r\n\r\nexport default class SliderTooltipView {\r\n    private _text: string | number | null = null;\r\n    private _html: HTMLDivElement;\r\n    private _orientation: \"horizontal\" | \"vertical\" | null = null;\r\n    private _root: HTMLElement | null = null;\r\n\r\n    constructor() {\r\n        this._create();\r\n    }\r\n\r\n    get html(): HTMLDivElement {\r\n        return this._html;\r\n    }\r\n\r\n    get text(): string | number | null {\r\n        return this._text;\r\n    }\r\n\r\n    get state(): { isRendered: boolean; isSet: boolean } {\r\n        return {\r\n            isRendered: !!this._root,\r\n            isSet: !!(this._orientation && this._text)\r\n        };\r\n    }\r\n\r\n    setOptions(\r\n        text: number,\r\n        orientation: \"horizontal\" | \"vertical\",\r\n        func?: ValueFunction\r\n    ): void {\r\n        this.setText(text, func);\r\n        this.setOrientation(orientation);\r\n    }\r\n\r\n    render(root: HTMLElement): void {\r\n        this._root = root;\r\n\r\n        this._root.append(this._html);\r\n    }\r\n\r\n    setText(text: number, func?: ValueFunction): void {\r\n        if ( func ) {\r\n            this._text = func(text);\r\n        } else this._text = text;\r\n\r\n        this._html.innerHTML = String(this._text);\r\n    }\r\n\r\n    setOrientation(orientation: \"horizontal\" | \"vertical\"): void {\r\n        this._orientation = orientation;\r\n\r\n        this._setOrientationClass();\r\n    }\r\n\r\n    cleanTextField(): void {\r\n        this._text = null;\r\n\r\n        this._html.innerHTML = \"\";\r\n    }\r\n\r\n    remove(): void {\r\n        this._root.removeChild(this._html);\r\n\r\n        this._root = null;\r\n    }\r\n\r\n    destroy(): void {\r\n        if ( this.state.isRendered ) this.remove();\r\n        this.cleanTextField();\r\n        this._orientation = null;\r\n        this._root = null;\r\n\r\n        this._html.className = \"jquery-slider-tooltip\";\r\n    }\r\n\r\n    private _create(): void {\r\n        const tooltip = document.createElement(\"div\");\r\n        tooltip.setAttribute(\"class\", \"jquery-slider-tooltip\");\r\n        tooltip.style.position = \"absolute\";\r\n\r\n        this._html = tooltip;\r\n    }\r\n\r\n    private _setOrientationClass(): void {\r\n        this._html.setAttribute(\"class\", \"jquery-slider-tooltip\");\r\n\r\n        if ( this._orientation === \"horizontal\" ) {\r\n            this._html.classList.add(\"jquery-slider-tooltip-horizontal\");\r\n        } else if ( this._orientation === \"vertical\" ) {\r\n            this._html.classList.add(\"jquery-slider-tooltip-vertical\");\r\n        }\r\n    }\r\n}\r\n","import \"./jquery-slider/jquery-slider.scss\"\r\nimport \"./jquery-slider/jquery-slider-horizontal.scss\"\r\nimport \"./jquery-slider/jquery-slider-vertical.scss\"\r\nimport \"./jquery-slider/jquery-slider-range.scss\"\r\nimport \"./jquery-slider/jquery-slider-handle.scss\"\r\nimport \"./jquery-slider/jquery-slider-tooltip.scss\"\r\nimport \"./jquery-slider/jquery-slider-tooltip-horizontal.scss\"\r\nimport \"./jquery-slider/jquery-slider-tooltip-vertical.scss\"\r\nimport \"./jquery-slider/jquery-slider-label.scss\"\r\nimport \"./jquery-slider/jquery-slider-pip.scss\"\r\nimport \"./jquery-slider/jquery-slider-labels-scale.scss\"\r\n","import SliderModel, {Options, RestOptionsToSet, UserOptions} from \"./MVP modules/Slider/SliderModel\"\r\nimport SliderView from \"./MVP modules/Slider/SliderView\"\r\nimport SliderPresenter from \"./MVP modules/Slider/SliderPresenter\"\r\n\r\nimport \"./styles/jquery-slider.styles\"\r\n\r\nexport interface JQueryElementWithSlider extends JQuery<HTMLElement> {\r\n    slider: (method?: UserOptions | keyof SliderMethods,\r\n             ...options: (UserOptions | keyof Options | RestOptionsToSet)[]) => void;\r\n}\r\n\r\ninterface SliderMethods {\r\n    init: (options?: Options) => this;\r\n    options: (...options: (UserOptions | string)[]) => this;\r\n}\r\n\r\n(( $ ) => {\r\n    const sliderMethods = {\r\n        getData(element: JQueryElementWithSlider): JQuery {\r\n            return element.data(\"slider\");\r\n        },\r\n\r\n        setData(root: JQueryElementWithSlider, slider: SliderPresenter): void {\r\n            root.data(\"slider\", {\r\n                root: root,\r\n                slider: slider\r\n            });\r\n        },\r\n\r\n        throwErr(existsOrNot: boolean): void {\r\n            if ( existsOrNot ) {\r\n                throw new Error(\"jQuery.slider already exists on this DOM element\");\r\n            }\r\n\r\n            if ( !existsOrNot ) {\r\n                throw new Error(\"jQuery.slider doesn't exist on this DOM element\");\r\n            }\r\n\r\n            throw new Error(\"Incorrect argument\");\r\n        },\r\n\r\n        init(userOptions?: UserOptions): void | JQuery {\r\n            const $this = (this as unknown as JQueryElementWithSlider).eq(0);\r\n\r\n            if ( !sliderMethods.getData($this) ) {\r\n                const slider = new SliderPresenter(new SliderView(), new SliderModel());\r\n\r\n                slider.initialize($this[0], userOptions);\r\n\r\n                sliderMethods.setData($this, slider);\r\n\r\n                return $this;\r\n            } else {\r\n                sliderMethods.throwErr(true);\r\n            }\r\n\r\n        },\r\n\r\n        options(...userOptions: (UserOptions | string)[] ) {\r\n            const $this = (this as unknown as JQueryElementWithSlider).eq(0);\r\n\r\n            const data = sliderMethods.getData($this);\r\n            if ( data ) {\r\n                // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n                // @ts-ignore\r\n                const slider = data.slider;\r\n\r\n                if ( userOptions.length === 0 ) {\r\n                    return slider.getOptions();\r\n                }\r\n\r\n                if ( userOptions.length === 1 && typeof userOptions[0] === \"object\" ) {\r\n                    slider.setOptions(userOptions[0] as UserOptions);\r\n\r\n                    return $this;\r\n                }\r\n\r\n                if ( (userOptions.length === 2\r\n                    || ( userOptions.length === 3 && userOptions[0] === \"classes\" ) )\r\n                    && typeof  userOptions[0] === \"string\") {\r\n\r\n                    if ( userOptions.length === 2 && userOptions[0] === \"classes\"\r\n                        && typeof userOptions[1] === \"string\" ) {\r\n\r\n                        return slider.getOptions(userOptions[0] as keyof Options,\r\n                            userOptions[1] as keyof UserOptions[\"classes\"]);\r\n                    }\r\n\r\n                    const options = userOptions.slice(1) as\r\n                        (UserOptions[keyof UserOptions] | UserOptions[\"classes\"][keyof UserOptions[\"classes\"]])[];\r\n\r\n                    slider.setOptions(userOptions[0] as keyof Options, ...options);\r\n\r\n                    return $this;\r\n                }\r\n\r\n                if ( ( (userOptions.length === 2 && userOptions[0] === \"classes\")\r\n                    || userOptions.length === 1 )\r\n                    && typeof  userOptions[0] === \"string\" ) {\r\n\r\n                    return slider.getOptions(userOptions[0] as keyof Options,\r\n                        userOptions[1] as keyof UserOptions[\"classes\"]);\r\n                }\r\n\r\n                throw new Error(\"Passed options are incorrect\");\r\n\r\n            } else {\r\n                sliderMethods.throwErr(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    ($.fn as JQueryElementWithSlider).slider =\r\n        function (\r\n            method?: UserOptions | keyof SliderMethods,\r\n            ...options: (UserOptions | keyof Options | RestOptionsToSet)[]\r\n        ) {\r\n        if ( sliderMethods[ method as keyof SliderMethods ] ) {\r\n            return sliderMethods[ method as keyof SliderMethods ].apply( this, options );\r\n\r\n        } else if ( typeof method === \"object\" || ( !method && options.length === 0 ) ) {\r\n            return sliderMethods.init.call(this, method as UserOptions);\r\n\r\n        } else {\r\n            $.error( \"Method '\" +  method + \"' doesn't exist for jQuery.slider\" );\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n\r\n"],"sourceRoot":""}