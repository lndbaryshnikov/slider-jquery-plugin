# slider-jquery-plugin
    Кастомизируемый плагин-бегунок для JQuery с множеством опций для настрйоки нужного внешнего вида и поведения.

Для ознакомления страница выложена на 
[GitHub Pages](https://lndbaryshnikov.github.io/slider-jquery-plugin/).

Развертывание 
-------------
```js
$ git clone https://github.com/lndbaryshnikov/slider-jquery-plugin.git
$ npm install
$ npm run build
```

Разработка
-------------
```js
$ npm run dev
```

Сервер для разработки
-------------
```js
$ npm run server
```

Режим watch для разработки
-------------
```js
$ npm run watch
```

Для сборки проекта использовался модульный сборщик Webpack.
Также использованы следующие препроцессоры, фреймворки, 
библиотеки и плагины:
* [SCSS](https://github.com/sass/sass) для CSS
* [JQuery](https://www.npmjs.com/package/jquery)
* [Jest](https://www.npmjs.com/package/jest) для тестирования
* [Puppeteer](https://www.npmjs.com/package/puppeteer)

Также среди зависимостей приложения есть 
[Babel](https://babeljs.io/) - транспайлер для ES6 и 
[ESLint](https://www.npmjs.com/package/eslint) 
- инструмент для обнаружения ошибок.

Все вышеперечисленные пакеты устанавливаются с помощью менеджера 
пакетов npm командой _"npm install"_. Все пакеты, использованные 
в данном проекте и их версии можно посмотреть в package.json.

Для работы приложению необходима одна глобальная зависимость - 
библиотека JQuery, которая должна быть подключена выше в коде. 

Также в package.json прописаны все необходимые npm-скрипты. Ниже 
приведены наиболее важные из них:
* "jest" - запуск jest-тестов
* "watchJest" - запуск тестов в режиме watch
* "jestPup" - запуск связки jest-puppeteer для тестирования View
(используется отдельный конфиг jest)
* "watchJestPup" - связка jest-puppeteer в режиме watch для View
* "eslint" - проверка кода линтером

Архитектура приложения построена на принципах MVP-архитектуры 
с Passive View.

Приложение разделено на три слоя - Model, View и Presenter:

1. Модель содержит только бизнес-логику и не производит 
никаких расчетов, связанных с отображением.
2. Вид управляет только отображением слайдера (бегунка).
Реагирует на действия пользователя, но обработкой 
пользовательских событий занимается исключительно Представитель.
3. Представитель - отдельный слой для обновления модели и 
отображения. Представитель подписывается на оповещения Модели и Вида
и занимается обработкой этих оповещений.

Представитель служит связующим звеном и позволяет сделать Модель и Вид
независимыми друг от друга. В данном приложении представитель 
зависим от Модели и Вида, но не наоборот. Для ослаблении зависимости 
Представителя от других слоев реализован паттерн Наблюдатель 
(Observer). Наблюдатель позволяет слоям легко подписываться на 
изменения и оповещать о них.

Приложение полность покрыто тестами. Тесты написаны с использованием
фреймворка Jest. Тесты отображения реализованы и запускаются с 
с помощью библиотеки Puppeteer. 

Плагин добавляет в объект JQuery метод слайдер, который при инициализации 
вешает бегунок на элемент по селектору:
При инициализации возможна либо передача объекта опций, либо инициализация
без ничего (тогда слайдре унаследует настрйоки по умолчанию).
В дальнейшем возможно, с помощью параметров метода slider,
получение объекта настроек или конкретной опции, установка также настроек 
объектом или по отдельности:

```js
    $("#selector").slider(); //инициализация с настройками по умолчанию
    $("#selector").slider({min: 10, tooltip: true }); //инициализация с пользовательскими настройками
    $("#selector").slider("options"); //возвращает объект текущих настроек
    $("#selector").slider("options", "pips"); //возвращает значение конкретной опции
    $("#selector").slider("options", { range: false, orientation: "vertical" }); //устанавливает новые опции
    $("#selector").slider("options", "step", 10); //устанавливает конкретную опцию
    $("#selector").slider("destroy"); //удаляет слайдер и его связь с элементом ".selector"
```

Сладер предусматривает следующии опции для конфигурации:
```js
    type Options = {
        min: number;
        max: number;
        step: number;
        value: number | number[];
        orientation: "horizontal" | "vertical";
        range: "min" | "max" | boolean;
        tooltip: boolean | (value?: Options["value"]);
        animate: "slow" | "fast" | false | number;
        labels: true | false | (value?: Options["value"]) => string | number;
        pips: boolean;
        change: ((value: number | number[]) => void) | false;

        classes: {
                "jquery-slider": string;
                "jquery-slider-range": string;
                "jquery-slider-handle": string;
            };
    };
```

Опции labels и tooltip принимают функции для последующей отрисовки value.
Предусмотрена опция change, которая принимает функцию для пользовательской 
обработки события изменения value слайдера. 
 
**UML диаграмма архитектуры приложения:**

![UML Diagram](https://github.com/lndbaryshnikov/slider-jquery-plugin/raw/master/jquery-slider-plugin-uml.png)
